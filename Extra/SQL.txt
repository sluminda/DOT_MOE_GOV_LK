CREATE TABLE password_resets (
    id INT AUTO_INCREMENT PRIMARY KEY,
    email VARCHAR(255) NOT NULL,
    token VARCHAR(255) NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
 

CREATE TABLE userlogin (
    userID INT AUTO_INCREMENT PRIMARY KEY,
    userName VARCHAR(255) UNIQUE,
    userPassword VARCHAR(255) NOT NULL,
    userType ENUM('Admin', 'Super Admin') NOT NULL,
    userEmail VARCHAR(255) UNIQUE NOT NULL,
    userPhoneNumber VARCHAR(10) NOT NULL
)ENGINE=InnoDB DEFAULT CHARSET=latin1;


CREATE TABLE login_records (
    logID INT AUTO_INCREMENT PRIMARY KEY,
    userID INT NOT NULL,
    loginTime DATETIME NOT NULL,
    ipAddress VARCHAR(45) NOT NULL,
    FOREIGN KEY (userID) REFERENCES userlogin(userID)
);



CREATE TABLE data_officers (
    id INT AUTO_INCREMENT PRIMARY KEY,
    fullName VARCHAR(200) NOT NULL,
    nameWithInitials VARCHAR(200) NOT NULL,
    nic VARCHAR(12) NOT NULL,
    schoolName VARCHAR(200) NOT NULL,
    schoolSensusNo VARCHAR(7) NOT NULL,
    district VARCHAR(50) NOT NULL,
    province VARCHAR(50) NOT NULL,
    zone VARCHAR(50) NOT NULL,
    contactNo VARCHAR(10) NOT NULL
);




-- Create the institutes table
CREATE TABLE institutes (
    cencode VARCHAR(10) PRIMARY KEY,
    institutionname VARCHAR(255) NOT NULL,
    schooltype INT NOT NULL
);

-- Create the otp_verification table
CREATE TABLE otp_verification (
    id INT AUTO_INCREMENT PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    otp_hash VARCHAR(64) NOT NULL,
    salt VARCHAR(64) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)ENGINE=InnoDB DEFAULT CHARSET=latin1;



CREATE TABLE data_officer_registration (
    fullName VARCHAR(255) NOT NULL,
    initials VARCHAR(255) NOT NULL,
    nic VARCHAR(20) NOT NULL,
    email VARCHAR(255) NOT NULL,
    whatsapp VARCHAR(20) NOT NULL,
    phone VARCHAR(20) NOT NULL,
    workplace VARCHAR(50) NOT NULL,
    schoolName VARCHAR(255),
    principleName VARCHAR(255),
    principleContactNo VARCHAR(20),
    provinceName VARCHAR(255),
    headOfInstituteName VARCHAR(255),
    headOfInstituteContactNo VARCHAR(20),
    zone VARCHAR(255),
    division VARCHAR(255),
    ip_address VARCHAR(45) NOT NULL,
    submitted_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE (email, nic)
)ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE data_officer_registration_history (
    id INT AUTO_INCREMENT PRIMARY KEY,
    fullName VARCHAR(255) NOT NULL,
    initials VARCHAR(255) NOT NULL,
    nic VARCHAR(20) NOT NULL,
    email VARCHAR(255) NOT NULL,
    whatsapp VARCHAR(20) NOT NULL,
    phone VARCHAR(20) NOT NULL,
    workplace VARCHAR(50) NOT NULL,
    schoolName VARCHAR(255),
    principleName VARCHAR(255),
    principleContactNo VARCHAR(20),
    provinceName VARCHAR(255),
    headOfInstituteName VARCHAR(255),
    headOfInstituteContactNo VARCHAR(20),
    zone VARCHAR(255),
    division VARCHAR(255),
    ip_address VARCHAR(45) NOT NULL,
    submitted_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)ENGINE=InnoDB DEFAULT CHARSET=latin1;



===============================


CREATE DATABASE IF NOT EXISTS dot_moe_gov_lk;
USE dot_moe_gov_lk;

-- Users table to store user details
CREATE TABLE IF NOT EXISTS users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    full_name VARCHAR(255) NOT NULL,
    name_with_initials VARCHAR(255) NOT NULL,
    nic VARCHAR(12) NOT NULL,
    email VARCHAR(255) NOT NULL UNIQUE,
    whatsapp_number VARCHAR(10) NOT NULL,
    mobile_number VARCHAR(10) NOT NULL,
    current_working_place ENUM('School', 'Provincial Office', 'Zonal Office', 'Divisional Office') NOT NULL,
    principle_name VARCHAR(255),
    principle_contact_no VARCHAR(10),
    head_name VARCHAR(255),
    head_contact_no VARCHAR(10),
    submit_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- OTPs table to store OTPs
CREATE TABLE IF NOT EXISTS otps (
    id INT AUTO_INCREMENT PRIMARY KEY,
    email VARCHAR(200) NOT NULL,
    otp_hash VARCHAR(200) NOT NULL,
    expires_at TIMESTAMP NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)ENGINE=InnoDB DEFAULT CHARSET=latin1;


-----------------------------------------------
== This is for the Data Officer Registration Form ==



CREATE TABLE otp_requests (
    id INT AUTO_INCREMENT PRIMARY KEY,
    email VARCHAR(250) NOT NULL,
    otp_hash VARCHAR(250) NOT NULL,
    expires_at INT NOT NULL
);

-- Creating the workplace_details table
CREATE TABLE workplace_details (
    id INT AUTO_INCREMENT PRIMARY KEY,
    fullName VARCHAR(250) NOT NULL,
    nameWithInitials VARCHAR(250) NOT NULL,
    nic VARCHAR(12) NOT NULL,
    email VARCHAR(250) NOT NULL,
    whatsappNumber VARCHAR(10) NOT NULL,
    mobileNumber VARCHAR(10) NOT NULL,
    headOfInstituteName VARCHAR(250) NOT NULL,
    headOfInstituteContactNo VARCHAR(10) NOT NULL,
    currentWorkingPlace VARCHAR(50) NOT NULL,
    selectedInstituteName VARCHAR(200) NOT NULL,
    submittedAt DATETIME NOT NULL,
    UNIQUE (nic, email)
)ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- Creating the workplace_details_history table
CREATE TABLE workplace_details_history (
    id INT AUTO_INCREMENT PRIMARY KEY,
    fullName VARCHAR(250) NOT NULL,
    nameWithInitials VARCHAR(250) NOT NULL,
    nic VARCHAR(12) NOT NULL,
    email VARCHAR(250) NOT NULL,
    whatsappNumber VARCHAR(10) NOT NULL,
    mobileNumber VARCHAR(10) NOT NULL,
    headOfInstituteName VARCHAR(250) NOT NULL,
    headOfInstituteContactNo VARCHAR(10) NOT NULL,
    currentWorkingPlace VARCHAR(50) NOT NULL,
    selectedInstituteName VARCHAR(200) NOT NULL,
    submittedAt DATETIME NOT NULL
)ENGINE=InnoDB DEFAULT CHARSET=latin1;

-----------------------------------------------