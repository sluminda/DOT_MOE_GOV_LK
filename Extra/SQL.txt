CREATE TABLE password_resets (
    id INT AUTO_INCREMENT PRIMARY KEY,
    email VARCHAR(255) NOT NULL,
    token VARCHAR(255) NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
 

CREATE TABLE userlogin (
    userID INT AUTO_INCREMENT PRIMARY KEY,
    userName VARCHAR(255) UNIQUE,
    userPassword VARCHAR(255) NOT NULL,
    userType ENUM('Admin', 'Super Admin') NOT NULL,
    userEmail VARCHAR(255) UNIQUE NOT NULL,
    userPhoneNumber VARCHAR(10) NOT NULL
)ENGINE=InnoDB DEFAULT CHARSET=latin1;


CREATE TABLE login_records (
    logID INT AUTO_INCREMENT PRIMARY KEY,
    userID INT NOT NULL,
    loginTime DATETIME NOT NULL,
    ipAddress VARCHAR(45) NOT NULL,
    FOREIGN KEY (userID) REFERENCES userlogin(userID)
);



CREATE TABLE data_officers (
    id INT AUTO_INCREMENT PRIMARY KEY,
    fullName VARCHAR(200) NOT NULL,
    nameWithInitials VARCHAR(200) NOT NULL,
    nic VARCHAR(12) NOT NULL,
    schoolName VARCHAR(200) NOT NULL,
    schoolSensusNo VARCHAR(7) NOT NULL,
    district VARCHAR(50) NOT NULL,
    province VARCHAR(50) NOT NULL,
    zone VARCHAR(50) NOT NULL,
    contactNo VARCHAR(10) NOT NULL
);




-- Create the institutes table
CREATE TABLE institutes (
    cencode VARCHAR(10) PRIMARY KEY,
    institutionname VARCHAR(255) NOT NULL,
    schooltype INT NOT NULL
);

-- Create the otp_verification table
CREATE TABLE otp_verification (
    email VARCHAR(255) PRIMARY KEY,
    otp VARCHAR(6) NOT NULL,
    expiry INT NOT NULL
);


CREATE TABLE form_submissions (
    fullName VARCHAR(255) NOT NULL,
    initials VARCHAR(255) NOT NULL,
    nic VARCHAR(20) NOT NULL PRIMARY KEY,
    email VARCHAR(255) NOT NULL,
    whatsapp VARCHAR(20) NOT NULL,
    phone VARCHAR(20) NOT NULL,
    workplace VARCHAR(50) NOT NULL,
    schoolName VARCHAR(255),
    principleName VARCHAR(255),
    principleContactNo VARCHAR(20),
    provinceName VARCHAR(255),
    headOfInstituteName VARCHAR(255),
    headOfInstituteContactNo VARCHAR(20),
    zone VARCHAR(255),
    division VARCHAR(255),
    ip_address VARCHAR(45) NOT NULL,
    submitted_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE form_submissions_history (
    fullName VARCHAR(255) NOT NULL,
    initials VARCHAR(255) NOT NULL,
    nic VARCHAR(20) NOT NULL,
    email VARCHAR(255) NOT NULL,
    whatsapp VARCHAR(20) NOT NULL,
    phone VARCHAR(20) NOT NULL,
    workplace VARCHAR(50) NOT NULL,
    schoolName VARCHAR(255),
    principleName VARCHAR(255),
    principleContactNo VARCHAR(20),
    provinceName VARCHAR(255),
    headOfInstituteName VARCHAR(255),
    headOfInstituteContactNo VARCHAR(20),
    zone VARCHAR(255),
    division VARCHAR(255),
    ip_address VARCHAR(45) NOT NULL,
    submitted_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

